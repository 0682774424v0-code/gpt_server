# Stable Diffusion WebUI Configuration
# Скопіюйте цей файл у .env і редагуйте потрібні значення

# ==================== SERVER ==================== 
PORT=5000
FLASK_ENV=production
SECRET_KEY=your-super-secret-key-change-this

# ==================== PATHS ====================
MODELS_PATH=./models
OUTPUT_DIR=./outputs
CACHE_DIR=./cache

# ==================== GPU/DEVICE ====================
# Choices: cuda, cpu, mps (macOS)
DEVICE=cuda

# Model precision: fp16 (fast, less memory) or fp32 (slower, more accurate)
MODEL_PRECISION=fp16

# ==================== OPTIMIZATION ====================
ENABLE_CUDA_GRAPHS=true
ENABLE_ATTENTION_SLICING=true
ENABLE_MEMORY_EFFICIENT=true
ENABLE_XFORMERS=true

# ==================== GOOGLE DRIVE ====================
# Set to true to enable Google Drive integration
ENABLE_GDRIVE=true

# Google Drive folder ID (will be created automatically if not set)
GDRIVE_FOLDER_ID=

# Auto-sync interval (minutes)
GDRIVE_SYNC_INTERVAL=5

# ==================== SECURITY ====================
# Rate limiting: requests per minute
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Maximum file upload size (MB)
MAX_UPLOAD_SIZE=100

# Allowed origins for CORS (comma-separated)
# Use * for development, specific domains for production
ALLOWED_ORIGINS=*

# ==================== GENERATION ==================== 
# Default generation parameters
DEFAULT_STEPS=20
DEFAULT_CFG_SCALE=7.5
DEFAULT_WIDTH=512
DEFAULT_HEIGHT=512
DEFAULT_SAMPLER=euler

# Inference optimization
ENABLE_SEQUENTIAL_CPU_OFFLOAD=false
ENABLE_ATTENTION_SLICING=true
USE_SCALED_DOT_PRODUCT_ATTENTION=true

# ==================== LOGGING ====================
LOG_LEVEL=INFO
LOG_FILE=server.log
LOG_FORMAT=json

# ==================== FEATURES ====================
# Enable/disable features
ENABLE_PROMPT_ENHANCEMENT=true
ENABLE_ADETAILER=true
ENABLE_UPSCALING=true
ENABLE_FACE_RESTORATION=true
ENABLE_CONTROLNET=true
ENABLE_IP_ADAPTER=true
ENABLE_LORA=true

# ==================== STORAGE ====================
# Image storage format: png, jpg, webp
OUTPUT_FORMAT=png

# Compression quality (1-100, only for jpg/webp)
OUTPUT_QUALITY=95

# Keep original generated images (before post-processing)
KEEP_ORIGINALS=true

# Delete old images after (days, 0 = disable)
AUTO_DELETE_AFTER_DAYS=0

# ==================== ADVANCED ====================
# Model offload strategy: sequential, attention, none
OFFLOAD_STRATEGY=sequential

# Maximum batch size
MAX_BATCH_SIZE=4

# WebSocket ping interval (seconds)
WS_PING_INTERVAL=25

# WebSocket timeout (seconds)
WS_PING_TIMEOUT=60

# ==================== PLUGINS ====================
# Enable external plugins
ENABLE_PLUGINS=false
PLUGINS_DIR=./plugins
